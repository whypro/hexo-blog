$(function(){var s=0;function e(e){var i;try{i=$(e)}catch(t){i=$(decodeURI(e))}i.velocity("stop").velocity("scroll",{duration:500,easing:"easeInOutQuart"})}$(".toc-child").hide(),$(window).scroll(throttle(function(t){var e,i,o=$(this).scrollTop();isMobile()||(e=o,i=$("#content-outer").height(),a=(a=$(window).height())<i?i-a:$(document).height()-a,a=e/a,a=100<(a=Math.round(100*a))?100:a<=0?0:a,$(".progress-num").text(a),$(".sidebar-toc__progress-bar").velocity("stop").velocity({width:a+"%"},{duration:100,easing:"easeInOutQuart"}),function(e){if(0===$(".toc-link").length)return;var t=$("#post-content").find("h1,h2,h3,h4,h5,h6"),i="";t.each(function(){var t=$(this);e>t.offset().top-25&&(i="#"+$(this).attr("id"))}),""===i&&($(".toc-link").removeClass("active"),$(".toc-child").hide());"5"===GLOBAL_CONFIG.hexoVersion[0]&&(i=encodeURI(i));var o=$(".toc-link.active");i&&o.attr("href")!==i&&(function(t){window.history.replaceState&&t!==window.location.hash&&window.history.replaceState(void 0,void 0,t)}(i),$(".toc-link").removeClass("active"),(t=$('.toc-link[href="'+i+'"]')).addClass("active"),o=t.parents(".toc-child"),function(t){t.is(":visible")||t.velocity("stop").velocity("transition.fadeIn",{duration:500,easing:"easeInQuart"})}((t=0<o.length?o.last():t).closest(".toc-item").find(".toc-child")),t.closest(".toc-item").siblings(".toc-item").find(".toc-child").hide())}(o));var a;a=s<o;56<(s=o)?(a?$("#page-header").hasClass("visible")?$("#page-header").removeClass("visible"):console.log():$("#page-header").hasClass("visible")?console.log():$("#page-header").addClass("visible"),$("#page-header").addClass("fixed"),"0"===$("#go-up").css("opacity")&&$("#go-up").velocity("stop").velocity({translateX:-30,rotateZ:360,opacity:1},{easing:"easeOutQuart",duration:200})):(0===o&&$("#page-header").removeClass("fixed").removeClass("visible"),$("#go-up").velocity("stop").velocity({translateX:0,rotateZ:180,opacity:0},{easing:"linear",duration:200}))},50,100)),$("#go-up").on("click",function(){$("body").velocity("stop").velocity("scroll",{duration:500,easing:"easeOutQuart"})}),$("#post-content").find("h1,h2,h3,h4,h5,h6").on("click",function(t){e("#"+$(this).attr("id"))}),$(".toc-link").on("click",function(t){t.preventDefault(),e($(this).attr("href"))})});